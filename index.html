<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Omni-Oracle | The Quantum Synthesizer</title>
    <link href="https://fonts.googleapis.com/css2?family=Syne+Mono&family=Share+Tech+Mono&family=VT323&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #03060d; --surface: #060c17; --cyan: #00e5ff; --text: #7a9ab8; --white: #e0f0ff;
            --font-oracle: 'VT323', monospace; --font-data: 'Share Tech Mono', monospace;
        }
        body { background: var(--bg); color: var(--text); font-family: 'Syne Mono', monospace; margin: 0; overflow-x: hidden; }
        .controls { padding: 20px; display: flex; gap: 15px; background: rgba(6,12,23,0.5); border-bottom: 1px solid var(--cyan); }
        input, select, button { background: #0a1220; color: var(--white); border: 1px solid #1a2d42; padding: 10px; outline: none; }
        button { color: var(--cyan); border-color: var(--cyan); cursor: pointer; font-family: var(--font-oracle); }
        .main { display: grid; grid-template-columns: 300px 1fr; height: 80vh; }
        .signals { border-right: 1px solid rgba(0,229,255,0.1); padding: 20px; }
        .output { padding: 40px; }
        .section { margin-bottom: 30px; }
        .label { color: var(--cyan); font-size: 0.8rem; letter-spacing: 2px; }
        .body { font-size: 1.6rem; color: var(--white); font-family: var(--font-oracle); }
    </style>
</head>
<body>

<div class="controls">
    <input type="text" id="user-question" placeholder="STATE YOUR INQUIRY..." style="flex:1">
    <button id="btn" onclick="synthesize()">â—ˆ COLLAPSE REALITY</button>
</div>

<div class="main">
    <div class="signals" id="grid"></div>
    <div class="output">
        <div id="ai-text">IDLE_WAITING_FOR_INPUT...</div>
    </div>
</div>

<script>
    const Library = [
        { name:"THE TOWER", glyph:"âš¡", arc:"Upheaval" }, { name:"THE VOID", glyph:"ðŸŒ€", arc:"Chaos" },
        { name:"THE MAGUS", glyph:"âœ¦", arc:"Will" }, { name:"THE MOON", glyph:"ðŸŒ‘", arc:"Illusion" }
    ];

    async function synthesize() {
        const aiText = document.getElementById('ai-text');
        const question = document.getElementById('user-question').value;
        aiText.innerHTML = "ESTABLISHING NEURAL LINK...";

        const results = Array.from({length: 3}, () => Library[Math.floor(Math.random() * Library.length)]);
        document.getElementById('grid').innerHTML = results.map(r => `<div>${r.glyph} ${r.name}</div>`).join('');

        try {
            const res = await fetch('/api/interpret', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ question, symbols: results.map(r => r.name) })
            });

            const data = await res.json();
            if (data.error) throw new Error(data.message);

            const p = data[0];
            aiText.innerHTML = `
                <div class="section"><span class="label">PATTERN</span><div class="body">${p.pattern}</div></div>
                <div class="section"><span class="label">READING</span><div class="body">${p.reading}</div></div>
                <div class="section"><span class="label">ACTION</span><div class="body">${p.action}</div></div>
            `;
        } catch (e) {
            aiText.innerHTML = `<b style="color:red">LINK_FAILURE: ${e.message}</b>`;
        }
    }
</script>
</body>
</html>
